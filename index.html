<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Love You Mom â¤ï¸</title>

<style>
*{box-sizing:border-box;font-family:Poppins,sans-serif}

body{
  margin:0;
  background:linear-gradient(135deg,#ff758c,#ff7eb3);
  color:#fff;
  text-align:center;
}

.page{
  display:none;
  min-height:100vh;
  padding:20px;
}
.active{display:block}

button{
  padding:12px 22px;
  border:none;
  border-radius:25px;
  background:#ff4d6d;
  color:white;
  font-size:1rem;
  margin:8px;
}

.option{
  background:rgba(255,255,255,0.25);
  padding:14px;
  margin:10px;
  border-radius:15px;
  font-size:1.1rem;
}

/* BUCKET GAME */
#bucketIcon{
  position:fixed;
  bottom:20px;
  font-size:4.5rem;
}
.fallHeart{
  position:absolute;
  top:0;
  font-size:2rem;
}

/* LOVE METER */
.popHeart{
  position:absolute;
  bottom:25%;
  font-size:2.2rem;
}
</style>
</head>

<body>

<!-- HOME -->
<div class="page active" id="home">
  <h1>â¤ï¸ Love You Mom â¤ï¸</h1>
  <p>Made with pure dil se ğŸ¥ºğŸ’–</p>
  <button onclick="startBucket()">ğŸª£ Catch Hearts</button>
  <button onclick="startQuiz()">ğŸ§  Heart Quiz</button>
  <button onclick="go('meter')">ğŸ’“ Love Meter</button>
</div>

<!-- BUCKET -->
<div class="page" id="bucket">
  <h2>ğŸª£ Catch the Hearts</h2>
  <p>Catch 20 â¤ï¸ to win | Miss 3 = Lose</p>
  <p>Score: <span id="bScore">0</span> | Missed: <span id="miss">0</span></p>
  <div id="bucketIcon">ğŸª£</div>
  <button onclick="go('home')">â¬… Exit</button>
</div>

<!-- QUIZ -->
<div class="page" id="quiz">
  <h2>ğŸ§  Momâ€™s Heart Quiz â¤ï¸</h2>
  <p id="mcqQuestion"></p>
  <div id="mcqOptions"></div>
  <button onclick="go('home')">â¬… Exit</button>
</div>

<!-- RESULT -->
<div class="page" id="result">
  <h2>ğŸ“Š Love Result â¤ï¸</h2>
  <canvas id="pieChart" width="250" height="250"></canvas>
  <p id="resultText"></p>
  <button onclick="go('home')">â¬… Home</button>
</div>

<!-- LOVE METER -->
<div class="page" id="meter">
  <h2>ğŸ’“ Love Meter</h2>
  <p>Time: <span id="time">10</span>s</p>
  <p>Hearts: <span id="mScore">0</span></p>
  <progress id="prog" value="0" max="15"></progress>
  <br><br>
  <button onclick="startMeter()">Start</button>
  <button onclick="go('home')">â¬… Exit</button>
</div>

<script>
/* NAV */
function go(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* ========== BUCKET GAME ========== */
let bScore=0, miss=0, bucketActive=false;
let bucket=document.getElementById("bucketIcon");
let bucketInterval;

function startBucket(){
  bScore=0; miss=0; bucketActive=true;
  document.getElementById("bScore").innerText=0;
  document.getElementById("miss").innerText=0;
  bucket.style.left="40%";
  go("bucket");
}

document.addEventListener("touchmove",e=>{
  if(bucketActive) bucket.style.left=e.touches[0].clientX-40+"px";
});

function spawnHeart(){
  if(!bucketActive) return;
  let h=document.createElement("div");
  h.className="fallHeart";
  h.innerHTML="â¤ï¸";
  h.style.left=Math.random()*90+"vw";
  document.body.appendChild(h);

  let fall=setInterval(()=>{
    if(!bucketActive){h.remove();clearInterval(fall);return;}
    h.style.top=h.offsetTop+6+"px";

    if(h.offsetTop>window.innerHeight-120){
      let b=bucket.getBoundingClientRect();
      let r=h.getBoundingClientRect();

      if(r.left>b.left && r.right<b.right){
        bScore++;
        document.getElementById("bScore").innerText=bScore;
        if(bScore>=20) endBucket("YOU WON â¤ï¸");
      }else{
        miss++;
        document.getElementById("miss").innerText=miss;
        if(miss>=3) endBucket("YOU LOST ğŸ’”");
      }
      h.remove(); clearInterval(fall);
    }
  },30);
}
bucketInterval=setInterval(spawnHeart,800);

function endBucket(msg){
  bucketActive=false;
  alert(msg);
}

/* ========== QUIZ ========== */
const mcq=[
  "Who loves you more?",
  "Who is your favourite child?",
  "Who do you care about more?",
  "Who is naughtiest?",
  "Who is innocent?",
  "Who is more cool?",
  "Who can live alone whole day?",
  "Who has more talent?"
];
let qIndex=0,dev=0,dhun=0;

function startQuiz(){
  qIndex=0;dev=0;dhun=0;
  go("quiz"); loadMCQ();
}
function loadMCQ(){
  mcqQuestion.innerText=mcq[qIndex];
  mcqOptions.innerHTML="";
  ["Dev","Dhun"].forEach(n=>{
    let d=document.createElement("div");
    d.className="option"; d.innerText=n;
    d.onclick=()=>{n==="Dev"?dev++:dhun++;nextQ();};
    mcqOptions.appendChild(d);
  });
}
function nextQ(){
  qIndex++;
  qIndex>=mcq.length?showResult():loadMCQ();
}
function showResult(){
  go("result");
  let total=dev+dhun;
  let dp=Math.round(dev/total*100);
  resultText.innerHTML=`â¤ï¸ Dev: <b>${dp}%</b><br>ğŸ’– Dhun: <b>${100-dp}%</b>`;
  drawPie(dp);
}
function drawPie(p){
  let c=pieChart.getContext("2d");
  c.clearRect(0,0,250,250);
  let a=p/100*2*Math.PI;
  c.beginPath();c.moveTo(125,125);
  c.arc(125,125,100,0,a);c.fillStyle="#ff4d6d";c.fill();
  c.beginPath();c.moveTo(125,125);
  c.arc(125,125,100,a,2*Math.PI);c.fillStyle="#ffd166";c.fill();
}

/* ========== LOVE METER (FINAL FIX) ========== */
let meterActive=false,mScore=0;
const TARGET=15;

function startMeter(){
  if(meterActive) return;
  meterActive=true;
  mScore=0;
  document.getElementById("mScore").innerText=0;
  document.getElementById("prog").value=0;

  let t=10;
  time.innerText=t;

  let timer=setInterval(()=>{
    t--; time.innerText=t;
    if(t<=0){
      clearInterval(timer);
      meterActive=false;
      alert(mScore<TARGET
        ?"Uh oh ğŸ˜¢ you donâ€™t love us good enough to fill the love meter.\nTry again â¤ï¸"
        :"Love Meter FULL â¤ï¸");
    }
  },1000);

  let spawn=setInterval(()=>{
    if(!meterActive){clearInterval(spawn);return;}
    let h=document.createElement("div");
    h.className="popHeart";
    h.innerHTML="â¤ï¸";
    h.style.left=Math.random()*60+20+"vw";
    document.body.appendChild(h);

    h.onclick=()=>{
      if(!meterActive) return;
      mScore++;
      document.getElementById("mScore").innerText=mScore;
      document.getElementById("prog").value=mScore;
      h.remove();
    };
    setTimeout(()=>h.remove(),600);
  },350);
}
</script>

</body>
</html>
