<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Apology Fun</title>
<style>
  body {
    font-family: 'Arial', sans-serif;
    background: linear-gradient(to right, #fbc2eb, #a6c1ee);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow: hidden;
    margin: 0;
  }

  #container {
    background: rgba(255, 255, 255, 0.9);
    padding: 40px;
    border-radius: 20px;
    text-align: center;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    max-width: 400px;
    animation: fadeIn 1s ease-in;
  }

  #message {
    font-size: 18px;
    margin-bottom: 20px;
    min-height: 60px;
  }

  button {
    background: #ff6f61;
    color: white;
    border: none;
    padding: 12px 25px;
    margin: 10px;
    border-radius: 10px;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.3s;
  }

  button:hover {
    transform: scale(1.1);
    background: #ff3b2e;
  }

  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(-20px);}
    to {opacity: 1; transform: translateY(0);}
  }

  /* Confetti canvas */
  #confetti-canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 999;
  }
</style>
</head>
<body>

<canvas id="confetti-canvas"></canvas>
<div id="container">
  <div id="message">Hey, are you still angry? ğŸ˜Ÿ</div>
  <button onclick="responseNo()">No</button>
  <button onclick="responseYes()">Yes</button>
</div>

<script>
let clickCount = 0;

function responseNo() {
  document.getElementById('message').innerHTML = "Yayyy! Thank you for not being angry ğŸ˜„ğŸ’–";
  showNextButtons("Are you still angry? ğŸ¤”", ["No, I'm not", "Still angry"]);
}

function responseYes() {
  document.getElementById('message').innerHTML = "Yaarrr Kavya, I'm really sorry ğŸ˜”ğŸ’”";
  showNextButtons("Are you still angry? ğŸ˜¢", ["No, I'm not", "Still angry"]);
}

function showNextButtons(msg, options) {
  const container = document.getElementById('container');
  container.innerHTML = `<div id="message">${msg}</div>`;
  options.forEach((opt, index) => {
    const btn = document.createElement('button');
    btn.innerText = opt;
    if (opt.toLowerCase().includes("still angry")) {
      btn.onclick = angryAgain;
    } else if (opt.toLowerCase().includes("no")) {
      btn.onclick = notAngryYet;
    }
    container.appendChild(btn);
  });
}

function angryAgain() {
  document.getElementById('message').innerHTML = "Esaaa mat karr yaarrr, man jaa ğŸ˜”ğŸ’–";
  showNextButtons("Choose wisely ğŸ˜…", ["I'm still angry", "Aww I'm not now"]);
}

function notAngryYet() {
  clickCount = 0;
  document.getElementById('message').innerHTML = "Yaar Kavyaa, sorry naa ğŸ˜”ğŸ–ğŸ» Choti baat mein naraz nai hote, dekh tere liye HTML bhi kiya, yaawrr maann jaaa ğŸ’–";
  const container = document.getElementById('container');
  container.innerHTML += `<button id="final-btn">Awww okayyy, I'm not angry anymore ğŸ˜„</button>`;
  const finalBtn = document.getElementById('final-btn');
  finalBtn.onclick = () => {
    clickCount++;
    if (clickCount >= 5) {
      document.getElementById('message').innerHTML = "Ehehehehee thankk youu maan jaane keliye ğŸ˜„ğŸ‰";
      finalBtn.style.display = "none";
      launchConfetti();
    }
  };
}

function launchConfetti() {
  const confetti = new ConfettiGenerator({ target: 'confetti-canvas', max: 150, size: 1 });
  confetti.render();
  setTimeout(() => confetti.clear(), 5000);
}

// Confetti library code
class ConfettiGenerator {
  constructor({target, max=100, size=1}) {
    this.canvas = document.getElementById(target);
    this.ctx = this.canvas.getContext("2d");
    this.max = max;
    this.size = size;
    this.particles = [];
    this.running = false;
    this.init();
  }
  init() {
    this.canvas.width = window.innerWidth;
    this.canvas.height = window.innerHeight;
    for(let i=0;i<this.max;i++){
      this.particles.push({
        x: Math.random()*this.canvas.width,
        y: Math.random()*this.canvas.height- this.canvas.height,
        r: Math.random()*4*this.size + 1,
        d: Math.random()*this.max,
        color: `hsl(${Math.random()*360},100%,50%)`,
        tilt: Math.random()*10 - 10,
        tiltAngleIncremental: Math.random()*0.07 + 0.05,
        tiltAngle:0
      });
    }
    this.running = true;
    this.draw();
  }
  draw() {
    if(!this.running) return;
    this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);
    this.particles.forEach(p=>{
      this.ctx.beginPath();
      this.ctx.lineWidth = p.r;
      this.ctx.strokeStyle = p.color;
      this.ctx.moveTo(p.x + p.tilt + p.r/2, p.y);
      this.ctx.lineTo(p.x + p.tilt, p.y + p.tilt + p.r/2);
      this.ctx.stroke();
    });
    this.update();
    requestAnimationFrame(()=>this.draw());
  }
  update() {
    this.particles.forEach((p,i)=>{
      p.tiltAngle += p.tiltAngleIncremental;
      p.y += (Math.cos(p.d) + 3 + p.r/2)/2;
      p.x += Math.sin(p.d);
      p.tilt = Math.sin(p.tiltAngle) * 15;
      if(p.y > this.canvas.height) {
        p.y = -10;
        p.x = Math.random()*this.canvas.width;
      }
    });
  }
  clear() { this.running=false; this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);}
}

</script>
</body>
</html>
